<div style='margin-top:30px'>

<form  action="." method="post" hx-post="." hx-swap="outerHTML">
    {% csrf_token %} 
    {% for field in form %}
    <div class='{% if field.field.required %} {{form.required_css_class}} {% endif%}'>
            {{field.label_tag }}{{field}}
    {% if field.help_text %}
        <p class="help"> {{ field.help_text| safe }}</p>
    {% endif %}
    </div> 
    {% endfor %}
    {% if formset %} 
        <h2>Ingredients</h2>
            {{ formset.management_form}}
        <div id='ingredient-form-list'>
            {% for form in formset%}
                <div class='ingredient-form'>
                    {{form.as_p}}
                </div>
              {% endfor %}
            <div id='empty-form' class='hidden'> {{ formset.empty_form }}</div>
            <button id='add-more'>Add more</button>
            {% endif %}
            <div class="htmx-indicator"> Loading......</div>
            <input class="htmx-inverted-indicator" type="submit" value="save">
        </form>
        {% if message %} 
       <div>{{ message }}</div>
    {% endif %}
</div>